(this["webpackJsonpclient-app"]=this["webpackJsonpclient-app"]||[]).push([[0],{275:function(e,t,n){},382:function(e,t,n){},384:function(e,t,n){"use strict";n.r(t),n.d(t,"history",(function(){return he}));var r=n(0),o=n(34),c=n.n(o),s=n(15),a=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,419)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),o(e),c(e),s(e)}))},i=n(42),u=n.n(i),l=n(83),d=n(10),j=n(12),b=n(11),h=n(37),p=n.n(h),m=n(51);p.a.defaults.baseURL="/api",p.a.interceptors.request.use((function(e){var t=v.commonStore.token;return t&&(e.headers.Authorization="Bearer ".concat(t)),e})),p.a.interceptors.response.use(function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=3;break;case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){var t=e.response,n=t.data;switch(t.status){case 400:m.b.error("Status 400 Bad Request");break;case 401:m.b.error("Status 401 Unauthorized");break;case 404:he.push("/not-found");break;case 500:v.commonStore.setServerError(n),m.b.error("Status 500 Server Error"),he.push("/server-error")}return Promise.reject(e)}));var O=function(e){return e.data},x=function(e){return p.a.get(e).then(O)},g=function(e,t){return p.a.post(e,t).then(O)},f={Account:{current:function(){return x("/account")},register:function(e){return g("/account/register",e)},login:function(e){return g("/account/login",e)},googleLogin:function(e){return g("/account/auth/google",e)}},TestAuth:{test:function(){return x("/testauth")}}},v={userStore:new(function(){function e(){var t=this;Object(d.a)(this,e),this.user=null,this.getUser=Object(l.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.Account.current();case 3:n=e.sent,Object(b.h)((function(){return t.user=n})),e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(0),console.log({"Error in userStore > getUser()":e.t0}),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])}))),this.register=function(){var e=Object(l.a)(u.a.mark((function e(n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.Account.register(n);case 3:r=e.sent,v.commonStore.setToken(r.token),Object(b.h)((function(){return t.user=r})),he.push("/"),v.modalStore.closeModal(),e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(0),console.log({"Error in userStore > register()":e.t0}),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),this.login=function(){var e=Object(l.a)(u.a.mark((function e(n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.Account.login(n);case 3:r=e.sent,v.commonStore.setToken(r.token),Object(b.h)((function(){return t.user=r})),he.push("/"),v.modalStore.closeModal(),e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(0),console.log({"Error in userStore > login()":e.t0}),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),this.googleLogin=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Account.googleLogin(t);case 2:n=e.sent,console.log("user in googleLogin() response: ",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.logout=function(){v.commonStore.setToken(null),window.localStorage.removeItem("jwt"),Object(b.h)((function(){return t.user=null})),he.push("/about")},Object(b.d)(this)}return Object(j.a)(e,[{key:"isLoggedIn",get:function(){return!!this.user}}]),e}()),commonStore:new function e(){var t=this;Object(d.a)(this,e),this.token=window.localStorage.getItem("jwt"),this.error=null,this.appLoaded=!1,this.setToken=function(e){t.token=e},this.setServerError=function(e){t.error=e},this.setAppLoaded=function(){t.appLoaded=!0},Object(b.d)(this),Object(b.g)((function(){return t.token}),(function(e){e?window.localStorage.setItem("jwt",e):window.localStorage.removeItem("jwt")}))},modalStore:new function e(){var t=this;Object(d.a)(this,e),this.modal={open:!1,body:null},this.openModal=function(e){t.modal.open=!0,t.modal.body=e},this.closeModal=function(){t.modal.open=!1,t.modal.body=null},Object(b.d)(this)}},y=Object(r.createContext)(v),w=function(){return Object(r.useContext)(y)},k=n(32),S=(n(271),n(272),n(273),n(274),n(275),n(406)),T=n(410),N=n(413),A=n(236),C=n(408),I=n(226),E=n.n(I),L=n(234),z=n.n(L),R=n(24),P=n(14),W=n(52),M=n(416),F=n(155),B=n(84),U=n(55),q=n(409),D=n(2),H=function(e){var t=Object(W.d)(e.name),n=Object(U.a)(t,2),r=n[0],o=n[1];return Object(D.jsxs)(q.a.Field,{error:o.touched&&!!o.error,children:[Object(D.jsx)("label",{children:e.label}),Object(D.jsx)("input",Object(B.a)(Object(B.a)({},r),e)),o.touched&&o.error?Object(D.jsx)(F.a,{basic:!0,color:"red",children:o.error}):null]})},J=n(111),G=n(412),V=function(e){var t=e.errors;return Object(D.jsx)(G.a,{error:!0,children:t&&Object(D.jsx)(G.a.List,{children:t.map((function(e,t){return Object(D.jsx)(G.a.Item,{children:e},t)}))})})},K=Object(P.a)((function(){var e=w().userStore.register;return Object(D.jsx)(W.c,{initialValues:{displayName:"",userName:"",email:"",password:"",error:null},onSubmit:function(t,n){var r=n.setErrors;return e(t).catch((function(e){return r({error:e})}))},validationSchema:J.a({displayName:J.b().required(),userName:J.b().required(),email:J.b().required().email(),password:J.b().required()}),children:function(e){var t=e.handleSubmit,n=e.isSubmitting,r=e.errors,o=e.isValid,c=e.dirty;return Object(D.jsxs)(W.b,{className:"ui form error",onSubmit:t,autoComplete:"off",children:[Object(D.jsx)(M.a,{as:"h3",content:"Register New Account!",color:"teal",textAlign:"center"}),Object(D.jsx)(H,{name:"displayName",placeholder:"Display Name"}),Object(D.jsx)(H,{name:"userName",placeholder:"Username"}),Object(D.jsx)(H,{name:"email",placeholder:"Email"}),Object(D.jsx)(H,{name:"password",placeholder:"Password",type:"password"}),Object(D.jsx)(W.a,{name:"error",render:function(){return Object(D.jsx)(V,{errors:r.error})}}),Object(D.jsx)(N.a,{loading:n,disabled:!o||!c||n,positive:!0,content:"Register",type:"submit",fluid:!0})]})}})})),Q=Object(P.a)((function(){var e=w(),t=e.userStore,n=e.modalStore,r=t.login,o=n.openModal;return Object(D.jsx)(W.c,{initialValues:{email:"",password:"",error:null},onSubmit:function(e,t){var n=t.setErrors;return r(e).catch((function(e){return n({error:"Email or Password did not match!"})}))},children:function(e){var t=e.handleSubmit,n=e.isSubmitting,r=e.errors;return Object(D.jsxs)(W.b,{className:"ui form",onSubmit:t,autoComplete:"off",children:[Object(D.jsx)(M.a,{as:"h3",content:"C#-React-JWT-Auth Login",color:"teal",textAlign:"center"}),Object(D.jsx)(H,{name:"email",placeholder:"Email"}),Object(D.jsx)(H,{name:"password",placeholder:"Password",type:"password"}),Object(D.jsx)(W.a,{name:"error",render:function(){return Object(D.jsx)(F.a,{style:{marginBottom:10},basic:!0,color:"red",content:r.error})}}),Object(D.jsx)(N.a,{loading:n,positive:!0,content:"Login",type:"submit",fluid:!0}),Object(D.jsx)("div",{style:{textAlign:"center",marginTop:20},children:Object(D.jsx)(R.a,{to:"#",onClick:function(){return o(Object(D.jsx)(K,{}))},children:"Register New Account Here!"})})]})}})})),X=Object(P.a)((function(){var e=w(),t=e.userStore,n=t.user,o=t.logout,c=e.modalStore.openModal;return Object(r.useEffect)((function(){}),[n]),Object(D.jsx)(T.a,{inverted:!0,fixed:"top",children:Object(D.jsxs)(S.a,{children:[Object(D.jsx)(T.a.Item,{as:R.b,to:"/",exact:!0,header:!0,children:"Home"}),Object(D.jsxs)(T.a.Item,{as:R.b,to:"/dashboard/user/".concat(null===n||void 0===n?void 0:n.userName),name:"Dashboard",children:[n?Object(D.jsx)(z.a,{style:{marginRight:10,fontSize:22,color:"#a7dd68"}}):Object(D.jsx)(E.a,{style:{marginRight:10,fontSize:22,color:"#f0acac"}}),"Dashboard"]}),Object(D.jsx)(T.a.Item,{as:R.b,to:"/about",name:"About"}),!n&&Object(D.jsx)(T.a.Item,{children:Object(D.jsx)(N.a,{onClick:function(){return c(Object(D.jsx)(Q,{}))},color:"green",style:{fontWeight:300},children:"LOGIN"})}),n&&Object(D.jsxs)(T.a.Item,{position:"right",children:[Object(D.jsx)(A.a,{src:(null===n||void 0===n?void 0:n.image)||"/assets/user3.png",avatar:!0,spaced:"right"}),Object(D.jsx)(C.a,{pointing:"top right",text:null===n||void 0===n?void 0:n.displayName,children:Object(D.jsxs)(C.a.Menu,{children:[Object(D.jsx)(C.a.Item,{as:R.a,to:"/dashboard/user/".concat(null===n||void 0===n?void 0:n.userName),text:"My Profile"}),Object(D.jsx)(C.a.Item,{onClick:o,text:"Logout",icon:"power"})]})})]})]})})})),Y=n(417),Z=n(414),$=n(407),_=function(e){var t=e.inverted,n=void 0===t||t,r=e.content,o=void 0===r?"Loading...":r;return Object(D.jsx)(Z.a,{active:!0,inverted:n,children:Object(D.jsx)($.a,{content:o})})},ee=Object(P.a)((function(){var e,t=w().userStore.user,n=Object(r.useState)(!0),o=Object(U.a)(n,2),c=o[0],s=o[1];return Object(r.useEffect)((function(){}),[t]),e=t?"blue-folder-unlock.jpeg":"blue-folder-lock.jpeg",c?(setTimeout((function(){s(!1)}),900),Object(D.jsx)(_,{content:"Loading App..."})):Object(D.jsx)(Y.a,{inverted:!0,textAlign:"center",vertical:!0,className:"masthead",style:{backgroundImage:'linear-gradient(rgba(0,0,0,.5),rgba(0,0,0,.5)),url("/assets/'.concat(e,'")'),backgroundSize:"cover"},children:Object(D.jsxs)(S.a,{text:!0,style:{marginBottom:60},children:[Object(D.jsx)(M.a,{as:"h1",inverted:!0,style:{marginBottom:25},children:t?"Welcome ".concat(t.userName,"!"):"C#-React-JWT-Auth"}),Object(D.jsx)(r.Fragment,{children:t?Object(D.jsx)(N.a,{as:R.a,to:"/dashboard/user/".concat(null===t||void 0===t?void 0:t.userName),size:"huge",inverted:!0,children:"Go To Dashboard!"}):Object(D.jsx)(N.a,{as:R.a,to:"/about",size:"huge",inverted:!0,children:"Show me the Magic!"})})]})})}));function te(){return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(M.a,{as:"h1",content:"Error Testing:"}),Object(D.jsx)(Y.a,{style:{height:70},children:Object(D.jsxs)(N.a.Group,{widths:"7",children:[Object(D.jsx)(N.a,{onClick:function(){p.a.get("/apibuggy/not-found").catch((function(e){return console.log(e.response)}))},content:"Not Found",basic:!0,primary:!0}),Object(D.jsx)(N.a,{onClick:function(){p.a.get("/apibuggy/bad-request").catch((function(e){return console.log(e.response)}))},content:"Bad Request",basic:!0,primary:!0}),Object(D.jsx)(N.a,{onClick:function(){p.a.get("/apibuggy/server-error").catch((function(e){return console.log(e.response)}))},content:"Server Error",basic:!0,primary:!0}),Object(D.jsx)(N.a,{onClick:function(){p.a.get("/apibuggy/unauthorised").catch((function(e){return console.log(e.response)}))},content:"Unauthorised",basic:!0,primary:!0})]})})]})}var ne=n(110),re=function(){return Object(D.jsxs)(Y.a,{placeholder:!0,children:[Object(D.jsx)(M.a,{icon:!0,children:Object(D.jsx)(ne.a,{name:"search",children:"We could not find this."})}),Object(D.jsx)(Y.a.Inline,{as:R.a,to:"/errors",primary:!0,children:"Return to Error Testing"})]})},oe=Object(P.a)((function(){return Object(D.jsxs)(Y.a,{placeholder:!0,children:[Object(D.jsx)(M.a,{icon:!0,children:Object(D.jsx)(ne.a,{name:"server",style:{marginRight:30},children:"Server Error"})}),Object(D.jsx)(Y.a.Inline,{as:R.a,to:"/errors",primary:!0,children:"Return to Error Testing"})]})})),ce=n(411),se=Object(P.a)((function(){var e=w().modalStore;return Object(D.jsx)(ce.a,{open:e.modal.open,onClose:e.closeModal,style:{width:450,padding:50,backgroundColor:"#d2d2d2"},children:Object(D.jsx)(ce.a.Content,{children:Object(D.jsx)(S.a,{style:{},children:e.modal.body})})})})),ae=Object(P.a)((function(e){var t=w().userStore.user;return Object(D.jsxs)(S.a,{children:[Object(D.jsx)("h3",{children:"Current User:"}),Object(D.jsxs)("ul",{style:{maxWidth:"100%",overflowWrap:"break-word",lineHeight:"1.8rem"},children:[Object(D.jsxs)("li",{children:["Username: ",null===t||void 0===t?void 0:t.userName]}),Object(D.jsxs)("li",{children:["Display Name: ",null===t||void 0===t?void 0:t.displayName]}),Object(D.jsxs)("li",{children:["Token: ",null===t||void 0===t?void 0:t.token]})]}),Object(D.jsx)("div",{style:{marginTop:75,marginBottom:75,textAlign:"center"},children:Object(D.jsx)(N.a,{onClick:function(){f.TestAuth.test().then((function(e){m.b.success("".concat(e),{position:"bottom-right",autoClose:5e3,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}))},color:"black",size:"large",children:"Test Authorization Endpoint"})})]})})),ie=(n(382),function(){return Object(D.jsxs)("div",{className:"window",children:[Object(D.jsxs)("div",{className:"titlebar",children:[Object(D.jsxs)("div",{className:"buttons",onClick:function(){alert("IMPORTANT: This window is for design purposes only. It does not work as a functioning window.\n\nThank you!")},children:[Object(D.jsx)("div",{className:"close",children:Object(D.jsx)("button",{className:"closebutton",children:"x"})}),Object(D.jsx)("div",{className:"minimize",children:Object(D.jsx)("button",{className:"minimizebutton",children:"\u2013"})}),Object(D.jsx)("div",{className:"zoom",children:Object(D.jsx)("button",{className:"zoombutton",children:"+"})})]}),"User Profile (Mock Window)"]}),Object(D.jsx)("div",{className:"content",children:Object(D.jsx)(ae,{})})]})}),ue=Object(P.a)((function(e){return Object(D.jsx)(S.a,{style:{maxWidth:"80%",height:"94vh",marginTop:"-5vh",display:"flex",alignItems:"center",lineHeight:"1.6rem",fontSize:16,fontFamily:"monospace"},children:Object(D.jsx)(ie,{})})})),le=Object(P.a)((function(e){return Object(D.jsxs)(S.a,{style:{fontSize:16,fontFamily:"monospace",width:"80%",marginTop:130},children:[Object(D.jsx)("h1",{style:{fontWeight:600,fontSize:35},children:"Auth Services with JWT's"}),Object(D.jsx)("h2",{style:{fontWeight:600,fontSize:16,marginTop:10},children:"C# | .NET5.0 | TypeScript | React"}),Object(D.jsx)("a",{href:"https://securityheaders.com/",children:Object(D.jsx)("img",{src:"/assets/screenshots/ss-security-rating.png",alt:"security rating",style:{marginBottom:20,marginTop:10,width:"100%",boxShadow:"0px 2px 1px -1px rgb(0 0 0 / 20%), 0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%)"}})}),Object(D.jsx)("h3",{children:"Description:"}),Object(D.jsx)("p",{children:"The purpose of this application is to demonstrate a working knowledge of authentication, authorization in the context of Json Web Tokens (JWT's), as well as how to make an application more secure through the implementation of security headers. In addition to the Auth services, the project also demonstrates an understanding on how to build a full-stack application, and how to deploy it to a production environment."}),Object(D.jsx)("h3",{children:"Details:"}),Object(D.jsxs)("ul",{style:{lineHeight:"1.6rem"},children:[Object(D.jsx)("li",{children:"C#/.NET5.0 back-end API, with a TypeScript/React front-end client"}),Object(D.jsx)("li",{children:"Containerized database using docker and Postgres"}),Object(D.jsx)("li",{children:"The React client is hosted side-by-side to the back-end API on Heroku (PaaS)"}),Object(D.jsx)("li",{children:"The back-end API is serving the React build files from a wwwroot folder (triggered by a post-build event)"})]}),Object(D.jsx)("div",{style:{margin:"40px 0 50px"},children:Object(D.jsx)(N.a,{onClick:function(){f.TestAuth.test().then((function(e){m.b.success("".concat(e),{position:"bottom-right",autoClose:5e3,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}))},color:"black",size:"large",children:"Test Authorization Endpoint"})})]})})),de=n(235),je=Object(P.a)((function(e){var t=e.component,n=Object(de.a)(e,["component"]),o=w(),c=o.userStore.isLoggedIn,a=o.modalStore.openModal;return Object(r.useEffect)((function(){}),[c]),Object(D.jsx)(s.b,Object(B.a)(Object(B.a)({},n),{},{render:function(e){return c?Object(D.jsx)(t,Object(B.a)({},e)):(a(Object(D.jsx)(Q,{})),Object(D.jsx)(s.a,{to:{pathname:"/about",state:{from:e.location}}}))}}))}));var be=Object(P.a)((function(){var e=w(),t=e.commonStore,n=e.userStore.getUser,o=t.token,c=t.appLoaded,a=t.setAppLoaded;return Object(r.useEffect)((function(){o?n().finally((function(){return a()})):a()}),[n,a,o]),c?Object(D.jsxs)(r.Fragment,{children:[Object(D.jsx)(m.a,{position:"bottom-right",hideProgressBar:!0}),Object(D.jsx)(se,{}),Object(D.jsx)(s.b,{exact:!0,path:"/",component:ee}),Object(D.jsx)(s.b,{path:"/(.+)",render:function(){return Object(D.jsxs)(r.Fragment,{children:[Object(D.jsx)(X,{}),Object(D.jsx)(S.a,{style:{marginTop:"7em"},children:Object(D.jsxs)(s.d,{children:[Object(D.jsx)(s.b,{path:"/about",component:le}),Object(D.jsx)(je,{exact:!0,path:"/dashboard/user/:userName",component:ue}),Object(D.jsx)(s.b,{path:"/errors",component:te}),Object(D.jsx)(s.b,{path:"/server-error",component:oe}),Object(D.jsx)(s.b,{component:re})]})})]})}})]}):Object(D.jsx)(_,{content:"Loading App..."})})),he=Object(k.a)();c.a.render(Object(D.jsx)(y.Provider,{value:v,children:Object(D.jsx)(s.c,{history:he,children:Object(D.jsx)(be,{})})}),document.getElementById("root")),a()}},[[384,1,2]]]);
//# sourceMappingURL=main.07f4018c.chunk.js.map