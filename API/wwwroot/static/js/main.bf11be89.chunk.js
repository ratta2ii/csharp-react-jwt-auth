(this["webpackJsonpclient-app"]=this["webpackJsonpclient-app"]||[]).push([[0],{275:function(e,t,n){},382:function(e,t,n){},384:function(e,t,n){"use strict";n.r(t),n.d(t,"history",(function(){return be}));var r=n(0),o=n(34),c=n.n(o),s=n(15),a=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,419)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),o(e),c(e),s(e)}))},i=n(42),l=n.n(i),u=n(83),d=n(10),j=n(12),h=n(11),b=n(37),p=n.n(b),m=n(51);p.a.defaults.baseURL="/api",p.a.interceptors.request.use((function(e){var t=v.commonStore.token;return t&&(e.headers.Authorization="Bearer ".concat(t)),e})),p.a.interceptors.response.use(function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=3;break;case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){var t=e.response,n=t.data;switch(t.status){case 400:m.b.error("Status 400 Bad Request");break;case 401:m.b.error("Status 401 Unauthorized");break;case 404:be.push("/not-found");break;case 500:v.commonStore.setServerError(n),m.b.error("Status 500 Server Error"),be.push("/server-error")}return Promise.reject(e)}));var O=function(e){return e.data},g=function(e){return p.a.get(e).then(O)},f=function(e,t){return p.a.post(e,t).then(O)},x={Account:{current:function(){return g("/account")},register:function(e){return f("/account/register",e)},login:function(e){return f("/account/login",e)},googleLogin:function(e){return f("/account/auth/google",e)}},TestAuth:{test:function(){return g("/testauth")}}},v={userStore:new(function(){function e(){var t=this;Object(d.a)(this,e),this.user=null,this.getUser=Object(u.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.Account.current();case 3:n=e.sent,Object(h.h)((function(){return t.user=n})),e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(0),console.log({"Error in userStore > getUser()":e.t0}),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])}))),this.register=function(){var e=Object(u.a)(l.a.mark((function e(n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.Account.register(n);case 3:r=e.sent,v.commonStore.setToken(r.token),Object(h.h)((function(){return t.user=r})),be.push("/"),v.modalStore.closeModal(),e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(0),console.log({"Error in userStore > register()":e.t0}),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),this.login=function(){var e=Object(u.a)(l.a.mark((function e(n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Login Cred ",n),e.prev=1,e.next=4,x.Account.login(n);case 4:r=e.sent,v.commonStore.setToken(r.token),Object(h.h)((function(){return t.user=r})),be.push("/"),v.modalStore.closeModal(),e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(1),console.log({"Error in userStore > login()":e.t0}),e.t0;case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),this.googleLogin=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.Account.googleLogin(t);case 2:n=e.sent,console.log("user in googleLogin() response: ",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.logout=function(){v.commonStore.setToken(null),window.localStorage.removeItem("jwt"),Object(h.h)((function(){return t.user=null})),be.push("/about")},Object(h.d)(this)}return Object(j.a)(e,[{key:"isLoggedIn",get:function(){return!!this.user}}]),e}()),commonStore:new function e(){var t=this;Object(d.a)(this,e),this.token=window.localStorage.getItem("jwt"),this.error=null,this.appLoaded=!1,this.setToken=function(e){t.token=e},this.setServerError=function(e){t.error=e},this.setAppLoaded=function(){t.appLoaded=!0},Object(h.d)(this),Object(h.g)((function(){return t.token}),(function(e){e?window.localStorage.setItem("jwt",e):window.localStorage.removeItem("jwt")}))},modalStore:new function e(){var t=this;Object(d.a)(this,e),this.modal={open:!1,body:null},this.openModal=function(e){t.modal.open=!0,t.modal.body=e},this.closeModal=function(){t.modal.open=!1,t.modal.body=null},Object(h.d)(this)}},w=Object(r.createContext)(v),y=function(){return Object(r.useContext)(w)},S=n(32),k=(n(271),n(272),n(273),n(274),n(275),n(406)),A=n(410),N=n(413),T=n(236),E=n(408),C=n(226),I=n.n(C),L=n(234),R=n.n(L),z=n(24),P=n(14),M=n(52),W=n(416),B=n(155),D=n(84),F=n(82),U=n(409),q=n(2),G=function(e){var t=Object(M.d)(e.name),n=Object(F.a)(t,2),r=n[0],o=n[1];return Object(q.jsxs)(U.a.Field,{error:o.touched&&!!o.error,children:[Object(q.jsx)("label",{children:e.label}),Object(q.jsx)("input",Object(D.a)(Object(D.a)({},r),e)),o.touched&&o.error?Object(q.jsx)(B.a,{basic:!0,color:"red",children:o.error}):null]})},H=n(111),J=n(412),V=function(e){var t=e.errors;return Object(q.jsx)(J.a,{error:!0,children:t&&Object(q.jsx)(J.a.List,{children:t.map((function(e,t){return Object(q.jsx)(J.a.Item,{children:e},t)}))})})},Y=Object(P.a)((function(){var e=y().userStore.register;return Object(q.jsx)(M.c,{initialValues:{displayName:"",userName:"",email:"",password:"",error:null},onSubmit:function(t,n){var r=n.setErrors;return e(t).catch((function(e){return r({error:e})}))},validationSchema:H.a({displayName:H.b().required(),userName:H.b().required(),email:H.b().required().email(),password:H.b().required()}),children:function(e){var t=e.handleSubmit,n=e.isSubmitting,r=e.errors,o=e.isValid,c=e.dirty;return Object(q.jsxs)(M.b,{className:"ui form error",onSubmit:t,autoComplete:"off",children:[Object(q.jsx)(W.a,{as:"h3",content:"Register New Account!",color:"teal",textAlign:"center"}),Object(q.jsx)(G,{name:"displayName",placeholder:"Display Name"}),Object(q.jsx)(G,{name:"userName",placeholder:"Username"}),Object(q.jsx)(G,{name:"email",placeholder:"Email"}),Object(q.jsx)(G,{name:"password",placeholder:"Password",type:"password"}),Object(q.jsx)(M.a,{name:"error",render:function(){return Object(q.jsx)(V,{errors:r.error})}}),Object(q.jsx)(N.a,{loading:n,disabled:!o||!c||n,positive:!0,content:"Register",type:"submit",fluid:!0})]})}})})),K=Object(P.a)((function(){var e=y(),t=e.userStore,n=e.modalStore,r=t.login,o=n.openModal;return Object(q.jsx)(M.c,{initialValues:{email:"",password:"",error:null},onSubmit:function(e,t){var n=t.setErrors;return r(e).catch((function(e){return n({error:"Email or Password did not match!"})}))},children:function(e){var t=e.handleSubmit,n=e.isSubmitting,r=e.errors;return Object(q.jsxs)(M.b,{className:"ui form",onSubmit:t,autoComplete:"off",children:[Object(q.jsx)(W.a,{as:"h3",content:"C#-React-JWT-Auth Login",color:"teal",textAlign:"center"}),Object(q.jsx)(G,{name:"email",placeholder:"Email"}),Object(q.jsx)(G,{name:"password",placeholder:"Password",type:"password"}),Object(q.jsx)(M.a,{name:"error",render:function(){return Object(q.jsx)(B.a,{style:{marginBottom:10},basic:!0,color:"red",content:r.error})}}),Object(q.jsx)(N.a,{loading:n,positive:!0,content:"Login",type:"submit",fluid:!0}),Object(q.jsx)("div",{style:{textAlign:"center",marginTop:20},children:Object(q.jsx)(z.a,{to:"#",onClick:function(){return o(Object(q.jsx)(Y,{}))},children:"Register New Account Here!"})})]})}})})),Q=Object(P.a)((function(){var e=y(),t=e.userStore,n=t.user,o=t.logout,c=e.modalStore.openModal;return Object(r.useEffect)((function(){}),[n]),Object(q.jsx)(A.a,{inverted:!0,fixed:"top",children:Object(q.jsxs)(k.a,{children:[Object(q.jsx)(A.a.Item,{as:z.b,to:"/",exact:!0,header:!0,children:"Home"}),Object(q.jsxs)(A.a.Item,{as:z.b,to:"/dashboard/user/".concat(null===n||void 0===n?void 0:n.userName),name:"Dashboard",children:[n?Object(q.jsx)(R.a,{style:{marginRight:10,fontSize:28,color:"#a7dd68"}}):Object(q.jsx)(I.a,{style:{marginRight:10,fontSize:28,color:"#f0acac"}}),"Dashboard"]}),Object(q.jsx)(A.a.Item,{as:z.b,to:"/about",name:"About"}),!n&&Object(q.jsx)(A.a.Item,{children:Object(q.jsx)(N.a,{onClick:function(){return c(Object(q.jsx)(K,{}))},color:"green",style:{fontWeight:300},children:"LOGIN"})}),n&&Object(q.jsxs)(A.a.Item,{position:"right",children:[Object(q.jsx)(T.a,{src:(null===n||void 0===n?void 0:n.image)||"/assets/user3.png",avatar:!0,spaced:"right"}),Object(q.jsx)(E.a,{pointing:"top left",text:null===n||void 0===n?void 0:n.displayName,children:Object(q.jsxs)(E.a.Menu,{children:[Object(q.jsx)(E.a.Item,{as:z.a,to:"/dashboard/user/".concat(null===n||void 0===n?void 0:n.userName),text:"My Profile"}),Object(q.jsx)(E.a.Item,{onClick:o,text:"Logout",icon:"power"})]})})]})]})})})),X=n(417),Z=Object(P.a)((function(){var e,t=y().userStore.user;return Object(r.useEffect)((function(){}),[t]),e=t?"blue-folder-unlock.jpeg":"blue-folder-lock.jpeg",Object(q.jsx)(X.a,{inverted:!0,textAlign:"center",vertical:!0,className:"masthead",style:{backgroundImage:'linear-gradient(rgba(0,0,0,.5),rgba(0,0,0,.5)),url("/assets/'.concat(e,'")'),backgroundSize:"cover"},children:Object(q.jsxs)(k.a,{text:!0,style:{marginBottom:60},children:[Object(q.jsx)(W.a,{as:"h1",inverted:!0,style:{marginBottom:25},children:t?"Welcome ".concat(t.userName,"!"):"C#-React-JWT-Auth"}),Object(q.jsx)(r.Fragment,{children:t?Object(q.jsx)(N.a,{as:z.a,to:"/dashboard/user/".concat(null===t||void 0===t?void 0:t.userName),size:"huge",inverted:!0,children:"Go To Dashboard!"}):Object(q.jsx)(N.a,{as:z.a,to:"/about",size:"huge",inverted:!0,children:"Show me the Magic!"})})]})})}));function $(){return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(W.a,{as:"h1",content:"Error Testing:"}),Object(q.jsx)(X.a,{children:Object(q.jsxs)(N.a.Group,{widths:"7",children:[Object(q.jsx)(N.a,{onClick:function(){p.a.get("/apibuggy/not-found").catch((function(e){return console.log(e.response)}))},content:"Not Found",basic:!0,primary:!0}),Object(q.jsx)(N.a,{onClick:function(){p.a.get("/apibuggy/bad-request").catch((function(e){return console.log(e.response)}))},content:"Bad Request",basic:!0,primary:!0}),Object(q.jsx)(N.a,{onClick:function(){p.a.get("/apibuggy/server-error").catch((function(e){return console.log(e.response)}))},content:"Server Error",basic:!0,primary:!0}),Object(q.jsx)(N.a,{onClick:function(){p.a.get("/apibuggy/unauthorised").catch((function(e){return console.log(e.response)}))},content:"Unauthorised",basic:!0,primary:!0})]})})]})}var _=n(110),ee=function(){return Object(q.jsxs)(X.a,{placeholder:!0,children:[Object(q.jsx)(W.a,{icon:!0,children:Object(q.jsx)(_.a,{name:"search",children:"We could not find this."})}),Object(q.jsx)(X.a.Inline,{as:z.a,to:"/errors",primary:!0,children:"Return to Error Testing"})]})},te=Object(P.a)((function(){return Object(q.jsxs)(X.a,{placeholder:!0,children:[Object(q.jsx)(W.a,{icon:!0,children:Object(q.jsx)(_.a,{name:"server",style:{marginRight:30},children:"Server Error"})}),Object(q.jsx)(X.a.Inline,{as:z.a,to:"/errors",primary:!0,children:"Return to Error Testing"})]})})),ne=n(414),re=n(407),oe=function(e){var t=e.inverted,n=void 0===t||t,r=e.content,o=void 0===r?"Loading...":r;return Object(q.jsx)(ne.a,{active:!0,inverted:n,children:Object(q.jsx)(re.a,{content:o})})},ce=n(411),se=Object(P.a)((function(){var e=y().modalStore;return Object(q.jsx)(ce.a,{open:e.modal.open,onClose:e.closeModal,style:{width:450,padding:50,backgroundColor:"#d2d2d2"},children:Object(q.jsx)(ce.a.Content,{children:Object(q.jsx)(k.a,{style:{},children:e.modal.body})})})})),ae=Object(P.a)((function(e){var t=y().userStore.user;return Object(q.jsxs)(k.a,{children:[Object(q.jsx)("p",{style:{fontWeight:600,fontSize:16},children:"Current User:"}),Object(q.jsxs)("ul",{style:{maxWidth:"100%",overflowWrap:"break-word"},children:[Object(q.jsxs)("li",{children:["Username: ",null===t||void 0===t?void 0:t.userName]}),Object(q.jsxs)("li",{children:["Display Name: ",null===t||void 0===t?void 0:t.displayName]}),Object(q.jsxs)("li",{children:["Token: ",null===t||void 0===t?void 0:t.token]})]}),Object(q.jsx)("div",{style:{marginTop:50},children:Object(q.jsx)(N.a,{onClick:function(){x.TestAuth.test().then((function(e){Object(m.b)("RESPONSE MESSAGE: ".concat(e))}))},size:"large",children:"Test Authorization Endpoint"})})]})})),ie=(n(382),function(){return Object(q.jsxs)("div",{className:"window",children:[Object(q.jsxs)("div",{className:"titlebar",children:[Object(q.jsxs)("div",{className:"buttons",onClick:function(){alert("IMPORTANT: This window is for design purposes only. It does not work as a functioning window.\n\nThank you!")},children:[Object(q.jsx)("div",{className:"close",children:Object(q.jsx)("a",{className:"closebutton",href:"#",children:Object(q.jsx)("span",{children:Object(q.jsx)("strong",{children:"x"})})})}),Object(q.jsx)("div",{className:"minimize",children:Object(q.jsx)("a",{className:"minimizebutton",href:"#",children:Object(q.jsx)("span",{children:Object(q.jsx)("strong",{children:"\u2013"})})})}),Object(q.jsx)("div",{className:"zoom",children:Object(q.jsx)("a",{className:"zoombutton",href:"#",children:Object(q.jsx)("span",{children:Object(q.jsx)("strong",{children:"+"})})})})]}),"Current User Profile"]}),Object(q.jsx)("div",{className:"content",children:Object(q.jsx)(ae,{})})]})}),le=Object(P.a)((function(e){return Object(q.jsx)(k.a,{style:{fontSize:14,fontFamily:"monospace",maxWidth:"80%",marginTop:130},children:Object(q.jsx)(ie,{})})})),ue=Object(P.a)((function(e){return Object(q.jsxs)(k.a,{style:{fontSize:14,fontFamily:"monospace",width:"80%",marginTop:130},children:[Object(q.jsx)("p",{style:{fontWeight:600,fontSize:25},children:"C#|ASP.Net Core w/ React Auth Services"}),Object(q.jsx)("p",{style:{fontWeight:600},children:"Description:"}),Object(q.jsx)("p",{children:'The purpose of this application is to demonstrate a working knowledge of authentication, authorization, OAuth 2.0 protocols, and the different security levels for each implementation. The login services for the application includes OAuth services, Salting and Hashing, as well as Cookies and Sessions. More specifically, a Google OAuth strategy offers users a way to be authenticated using the OAuth 2.0 protocols; This strategy is considered the most secure for this application (Security level 6). I have also added a "local" strategy as well, that allows a user to register a new account with a username (email) and password -instead of using the more secure OAuth services. In addition to the Auth services, the application also demonstrates a working knowledge on how to both build, and deploy, a full-stack C#/ASP.Net Core, with React, application.'}),Object(q.jsx)("p",{style:{fontWeight:600},children:"Details:"}),Object(q.jsxs)("ul",{style:{lineHeight:"1.5rem"},children:[Object(q.jsx)("li",{children:"C# | ASP.Net Core back-end API, with a React client for the front-end"}),Object(q.jsx)("li",{children:"Database hosted on AWS S3 through MongoDB Atlas (DBaaS)"}),Object(q.jsx)("li",{children:"Both the Express API and the React client are hosted side-by-side on Heroku (PaaS)"}),Object(q.jsx)("li",{children:"The Express application is serving the React build/ folder as a static file"}),Object(q.jsx)("li",{children:"All authentication is done server-side using passport.js to authenticate users"}),Object(q.jsx)("li",{children:"The Mongoose Schema, and code logic, is configured in a way to allow both sign-in methods (OAuth and Local) to persist while always returning the same user object"})]}),Object(q.jsx)("p",{style:{fontWeight:600},children:"Important Note:"}),Object(q.jsxs)("p",{children:[Object(q.jsx)("span",{style:{textDecoration:"underline",fontWeight:"bold"},children:"The application is still in the development phase. Please note that proper error handling, as well as the implementation of additional OAuth strategies, will still be added before fully reaching my project goals."})," ","You can, however, still register and log in using the Google OAuth services, as well as the more traditional way of entering a username and password."]}),Object(q.jsx)("div",{style:{marginTop:25},children:Object(q.jsx)(N.a,{onClick:function(){x.TestAuth.test().then((function(e){Object(m.b)("RESPONSE MESSAGE: ".concat(e))}))},size:"large",children:"Test Authorization Endpoint"})})]})})),de=n(235),je=Object(P.a)((function(e){var t=e.component,n=Object(de.a)(e,["component"]),o=y(),c=o.userStore.isLoggedIn,a=o.modalStore.openModal;return Object(r.useEffect)((function(){console.log("isLoggedIn: ",c)}),[c]),Object(q.jsx)(s.b,Object(D.a)(Object(D.a)({},n),{},{render:function(e){return c?Object(q.jsx)(t,Object(D.a)({},e)):(a(Object(q.jsx)(K,{})),Object(q.jsx)(s.a,{to:{pathname:"/about",state:{from:e.location}}}))}}))}));var he=Object(P.a)((function(){var e=y(),t=e.commonStore,n=e.userStore.getUser,o=t.token,c=t.appLoaded,a=t.setAppLoaded;return Object(r.useEffect)((function(){o?n().finally((function(){return a()})):a()}),[n,a,o]),c?Object(q.jsxs)(r.Fragment,{children:[Object(q.jsx)(m.a,{position:"bottom-right",hideProgressBar:!0}),Object(q.jsx)(se,{}),Object(q.jsx)(s.b,{exact:!0,path:"/",component:Z}),Object(q.jsx)(s.b,{path:"/(.+)",render:function(){return Object(q.jsxs)(r.Fragment,{children:[Object(q.jsx)(Q,{}),Object(q.jsx)(k.a,{style:{marginTop:"7em"},children:Object(q.jsxs)(s.d,{children:[Object(q.jsx)(s.b,{path:"/about",component:ue}),Object(q.jsx)(je,{exact:!0,path:"/dashboard/user/:userName",component:le}),Object(q.jsx)(s.b,{path:"/errors",component:$}),Object(q.jsx)(s.b,{path:"/server-error",component:te}),Object(q.jsx)(s.b,{component:ee})]})})]})}})]}):Object(q.jsx)(oe,{content:"Loading App..."})})),be=Object(S.a)();c.a.render(Object(q.jsx)(w.Provider,{value:v,children:Object(q.jsx)(s.c,{history:be,children:Object(q.jsx)(he,{})})}),document.getElementById("root")),a()}},[[384,1,2]]]);
//# sourceMappingURL=main.bf11be89.chunk.js.map